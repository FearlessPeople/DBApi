import{v as Fe,n as he,B as ge,b as ye,_ as ke}from"./index.959f545d.js";/* empty css               *//* empty css              *//* empty css              *//* empty css              *//* empty css               */import"./index.4286c144.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as X,j as r,w as Be,o as G,D as b,aF as E,aI as a,H as x,aO as g,aJ as e,aW as D,bN as Ce,aZ as we,i as Ee,r as Q,c as xe,b0 as Te,c1 as Ve,E as W,aN as h,bx as O,aL as ze,aK as Ie,F as Re,u as Ae,aU as Ue,b7 as Me,bQ as Le,b6 as Pe,bS as Se,bd as $e,bT as Ne,ad as Oe,aX as je,bc as Ke,a7 as He,bL as Je,b1 as Ze,b9 as qe,bo as Qe,bp as We,bU as Xe,ah as Ge,bb as Ye,bM as ea,bF as aa}from"./arco.ec9395ed.js";import{u as ta}from"./loading.0c4c157b.js";import{b as oa,g as la,s as na,p as ua,c as sa,e as ia}from"./sys-role-manager.c6e47909.js";/* empty css               */import"./chart.2a47e1e9.js";import"./vue.ec003c39.js";const ra={name:"RolePermission"},ca=X({...ra,props:{visible:{type:Boolean,default:!1},roleData:{type:Object,default:()=>({})}},emits:["update:visible"],setup(T,{emit:V}){const c=r([]),s=r([]),d=T,z=V,n=()=>{z("update:visible",!1)};async function y(){await na(d.roleData,c.value)}const k=()=>{console.log(c.value),y(),n(),D.success("\u6743\u9650\u5206\u914D\u6210\u529F")},_=()=>n();async function A(){const{data:i}=await oa();s.value=[],console.log(i),s.value.push(i)}async function B(){const{data:i}=await la(d.roleData),m=i.map(C=>C.id);c.value=[],c.value.push(...m)}return Be(()=>d.visible,i=>{i&&(A(),B())}),G(async()=>{}),(i,m)=>{const C=Ce,p=we;return b(),E(p,{width:400,visible:T.visible,onOk:k,onCancel:_,unmountOnClose:""},{header:a(()=>[x("span",null,"\u7ED9\u3010"+g(T.roleData.name)+"\u3011\u89D2\u8272\u5206\u914D\u6743\u9650",1)]),default:a(()=>[x("div",null,[e(C,{blockNode:!0,"expanded-keys":[0],"show-line":!0,checkable:!0,"checked-keys":c.value,"onUpdate:checkedKeys":m[0]||(m[0]=I=>c.value=I),data:s.value},null,8,["checked-keys","data"])])]),_:1},8,["visible"])}}}),da={class:"container"},ma={class:"action-icon"},pa={name:"UserManager"},_a=X({...pa,setup(T){Ee("baseURL");const V=()=>({id:void 0,name:"",remark:""}),{loading:c,setLoading:s}=ta(!0),{t:d}=Fe.exports.useI18n(),z=r([]),n=r(V()),y=r("small"),k={current:1,pageSize:10,showJumper:!0,showTotal:!0,showMore:!0},_=Q({...k}),A=xe(()=>[{name:d("searchTable.size.mini"),value:"mini"},{name:d("searchTable.size.small"),value:"small"},{name:d("searchTable.size.medium"),value:"medium"},{name:d("searchTable.size.large"),value:"large"}]),B=async(o={current:1,pageSize:10})=>{s(!0);try{const{data:t}=await ua(o);z.value=t.records,_.current=o.current,_.total=t.total}catch{}finally{s(!1)}},i=()=>{n.value=V()},m=()=>{B({...k,...n.value})},C=o=>{B({...k,current:o})},p=r(!1),I=r(),u=Q({id:-1,name:"",remark:""}),Y=async o=>{try{if(await I.value.validate()===void 0){const F={...u};s(!0);try{F.id!==void 0&&F.id>0?le(F):oe(F),o(!0)}catch{D.error("\u89D2\u8272\u4FE1\u606F\u4FDD\u5B58\u5931\u8D25")}finally{s(!1)}}else o(!1)}catch{D.error("\u8868\u5355\u586B\u5199\u9519\u8BEF"),o(!1)}},U=r(!1),M=r({id:-1}),ee=o=>{U.value=!0,M.value=o},L=()=>{u.id=-1,u.name="",u.remark=""},ae=()=>{L(),p.value=!1},te=()=>{p.value=!0},oe=async o=>{const t=await sa(o);t.status?(D.success(t.message),L()):D.error(t.message)},le=async o=>{const t=await ia(o);t.status?(D.success(t.message),m(),L(),p.value=!1):D.error(t.message)},ne=async o=>{s(!0);try{u.name=o.name||"",u.remark=o.remark||"",u.id=o.id,p.value=!0}catch{}finally{s(!1)}},ue=(o,t)=>{y.value=o};return G(()=>{B()}),(o,t)=>{const F=Te("Breadcrumb"),j=Ue,w=Me,f=Le,P=Pe,S=Se,K=$e,H=Ne,se=Oe,$=je,J=he,Z=Ke,ie=He,re=Je,ce=Ze,R=qe,de=ge,me=Qe,pe=We,v=Xe,_e=Ge,q=Ye,fe=ye,ve=ea,be=aa,N=Ve("permission");return b(),W("div",da,[e(F,{items:["\u7CFB\u7EDF\u7BA1\u7406","\u89D2\u8272\u7BA1\u7406"]}),e(be,{class:"general-card",title:"\u89D2\u8272\u7BA1\u7406"},{default:a(()=>[e(S,null,{default:a(()=>[e(f,{flex:1},{default:a(()=>[e(K,{model:n.value,"label-col-props":{span:6},"wrapper-col-props":{span:18},"label-align":"left"},{default:a(()=>[e(S,{gutter:16},{default:a(()=>[e(f,{span:6},{default:a(()=>[e(w,{field:"id",label:"\u89D2\u8272ID"},{default:a(()=>[e(j,{modelValue:n.value.id,"onUpdate:modelValue":t[0]||(t[0]=l=>n.value.id=l),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272ID",min:1},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:6},{default:a(()=>[e(w,{field:"name",label:"\u89D2\u8272\u540D\u79F0"},{default:a(()=>[e(P,{modelValue:n.value.name,"onUpdate:modelValue":t[1]||(t[1]=l=>n.value.name=l),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:6},{default:a(()=>[e(w,{field:"remark",label:"\u5907\u6CE8"},{default:a(()=>[e(P,{modelValue:n.value.remark,"onUpdate:modelValue":t[2]||(t[2]=l=>n.value.remark=l),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(H,{style:{height:"84px"},direction:"vertical"}),e(f,{flex:"86px",style:{"text-align":"right"}},{default:a(()=>[e(Z,{direction:"vertical",size:18},{default:a(()=>[e($,{type:"primary",onClick:m},{icon:a(()=>[e(se)]),default:a(()=>[h(" "+g(o.$t("searchTable.form.search")),1)]),_:1}),e($,{onClick:i},{icon:a(()=>[e(J)]),default:a(()=>[h(" "+g(o.$t("searchTable.form.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(H,{style:{"margin-top":"0"}}),e(S,{style:{"margin-bottom":"16px"}},{default:a(()=>[e(f,{span:12},{default:a(()=>[e(Z,null,{default:a(()=>[O((b(),E($,{type:"primary",onClick:te},{icon:a(()=>[e(ie)]),default:a(()=>[h(" "+g(o.$t("searchTable.operation.create")),1)]),_:1})),[[N,["sys:role:add"]]]),e(ce,{visible:p.value,"onUpdate:visible":t[5]||(t[5]=l=>p.value=l),title:"\u89D2\u8272\u4FE1\u606F",onCancel:ae,onBeforeOk:Y,draggable:""},{default:a(()=>[e(K,{ref_key:"roleModalFormRef",ref:I,model:u},{default:a(()=>[e(w,{field:"name",label:"\u89D2\u8272\u540D",rules:[{required:!0,message:"\u89D2\u8272\u540D\u4E0D\u80FD\u4E3A\u7A7A"},{minLength:3,maxLength:20,message:"\u89D2\u8272\u540D\u957F\u5EA6\u4E3A3-20\u4E2A\u5B57\u7B26"},{match:/^[\u4e00-\u9fa5a-zA-Z0-9]+$/,message:"\u89D2\u8272\u540D\u53EA\u80FD\u5305\u542B\u6C49\u5B57\u3001\u5B57\u6BCD\uFF08\u5927\u5C0F\u5199\uFF09\u3001\u6570\u5B57\uFF0C\u4E0D\u80FD\u5305\u542B\u7279\u6B8A\u5B57\u7B26\u3002"}],"validate-trigger":["blur"]},{default:a(()=>[e(P,{modelValue:u.name,"onUpdate:modelValue":t[3]||(t[3]=l=>u.name=l),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D"},null,8,["modelValue"])]),_:1}),e(w,{field:"remark",label:"\u5907\u6CE8"},{default:a(()=>[e(re,{modelValue:u.remark,"onUpdate:modelValue":t[4]||(t[4]=l=>u.remark=l),placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u5907\u6CE8","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible"])]),_:1})]),_:1}),e(f,{span:12,style:{display:"flex","align-items":"center","justify-content":"end"}},{default:a(()=>[e(R,{content:o.$t("searchTable.actions.refresh")},{default:a(()=>[x("div",{class:"action-icon",onClick:m},[e(J,{size:"18"})])]),_:1},8,["content"]),e(pe,{onSelect:ue},{content:a(()=>[(b(!0),W(ze,null,Ie(A.value,l=>(b(),E(me,{key:l.value,value:l.value,class:Re({active:l.value===y.value})},{default:a(()=>[x("span",null,g(l.name),1)]),_:2},1032,["value","class"]))),128))]),default:a(()=>[e(R,{content:o.$t("searchTable.actions.density")},{default:a(()=>[x("div",ma,[e(de,{size:"18"})])]),_:1},8,["content"])]),_:1})]),_:1})]),_:1}),e(ve,{"row-key":"id","column-resizable":"",loading:Ae(c),pagination:_,data:z.value,bordered:!1,size:y.value,onPageChange:C},{columns:a(()=>[e(v,{title:"#","data-index":"",width:50},{cell:a(({rowIndex:l})=>[h(g(l+1+(_.current-1)*_.pageSize),1)]),_:1}),e(v,{title:"\u89D2\u8272ID","data-index":"id",width:80}),e(v,{title:"\u89D2\u8272\u540D\u79F0","data-index":"name",width:100}),e(v,{title:"\u5907\u6CE8","data-index":"remark",ellipsis:!0,tooltip:!0}),e(v,{title:"\u521B\u5EFA\u65F6\u95F4","data-index":"createTime"}),e(v,{title:"\u66F4\u65B0\u65F6\u95F4","data-index":"updateTime"}),e(v,{title:"\u64CD\u4F5C"},{cell:a(({record:l})=>[e(R,{content:"\u66F4\u65B0\u89D2\u8272\u4FE1\u606F"},{default:a(()=>[O((b(),E(q,{onClick:De=>ne(l)},{icon:a(()=>[e(_e)]),default:a(()=>[h(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[N,["sys:role:edit"]]])]),_:2},1024),e(R,{content:"\u7ED9\u8BE5\u89D2\u8272\u5206\u914D\u6743\u9650"},{default:a(()=>[O((b(),E(q,{onClick:De=>ee(l)},{icon:a(()=>[e(fe)]),default:a(()=>[h(" \u6743\u9650\u8BBE\u7F6E ")]),_:2},1032,["onClick"])),[[N,["sys:role:permission"]]])]),_:2},1024)]),_:1})]),_:1},8,["loading","pagination","data","size"])]),_:1}),e(ca,{visible:U.value,"onUpdate:visible":t[6]||(t[6]=l=>U.value=l),roleData:M.value,"onUpdate:roleData":t[7]||(t[7]=l=>M.value=l)},null,8,["visible","roleData"])])}}});const Ia=ke(_a,[["__scopeId","data-v-9d55fe33"]]);export{Ia as default};
